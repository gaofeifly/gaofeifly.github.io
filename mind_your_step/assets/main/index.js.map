{"version":3,"sources":["../file:/C:/Elan/cocos/HelloWorld/assets/NewComponent.ts","../file:/C:/Elan/cocos/HelloWorld/assets/scripts/AudioController.ts","../file:/C:/Elan/cocos/HelloWorld/assets/migrate-canvas.ts","../file:/C:/Elan/cocos/HelloWorld/assets/scripts/PlayerController.ts","../file:/C:/Elan/cocos/HelloWorld/assets/scripts/GameManager.ts"],"names":["_class","_RF","push","undefined","_dec","_dec2","_dec3","_class2","_descriptor","_descriptor2","ccclass","_decorator","property","_Component","NewComponent","apply","this","arguments","_inheritsLoose","prototype","start","Component","pop","AudioController","AudioSource","AudioClip","_applyDecoratedDescriptor","_this","_len","length","args","Array","_key","_initializerDefineProperty","call","concat","_assertThisInitialized","_proto","play","audio","pause","playOneShot","sound","configurable","enumerable","writable","initializer","customLayerMask","setChildrenLayer","node","layer","i","l","children","director","on","Director","EVENT_AFTER_SCENE_LAUNCH","_director$getScene","_director$getScene2","_director$getScene3","roots","getScene","allCanvases","getComponentsInChildren","Canvas","filter","x","cameraComponent","allCameras","Camera","usedLayer","forEach","visibility","persistCanvas","root","game","isPersistRootNode","canvases","val","find","availableLayers","lastAvailableLayer","setParentEngine","Node","setParent","getCanvasCameraLayer","canvas","getComponent","parent","value","keepWorldTransform","_dec4","_dec5","_dec6","_dec7","_dec8","_dec9","_dec10","_dec11","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","PlayerController","type","SkeletalAnimation","_startJump","_jumpStep","_curJumpTime","_jumpTime","_curJumpSpeed","_curPos","Vec3","_deltaPos","_targetPos","curMoveIndex","setInputActive","active","Handle","onOneStepClick","jumpByStep","onTwoStepClick","step","emit","getPosition","add","CocosAnim","getState","speed","reset","onOnceJumpEnd","update","deltaTime","setPosition","BlockType","GameState","Label","Prefab","CCInteger","GameManager","_road","_curStayDuration","_curState","GS_INIT","_refreshStep","_canGenRoad","_refreshNum","_startStamp","_this$playerCtrl","_this$playerCtrl2","curState","playerCtrl","onPlayerJumpEnd","onPlayerJumpStart","_this$audioController","audioController","stepsLabel","_this$playerCtrl3","moveIndex","string","roadMaxLength","checkResult","backStartMenu","init","startMenu","endMenu","initRoad","ZERO","_this$playerCtrl4","BT_NONE","GS_END","generateBlocks","startIndex","endIndex","BT_STONE","Math","floor","random","j","block","spawnBlockByType","addChild","removeAllChildren","initRoadLength","generateRoad","_this2","deleteBlockNum","slice","r","removeChild","onStartButtonClicked","GS_PLAYING","Date","getTime","cubePrfb","instantiate","_maxStayDuration","_ref$curMoveIndex","key","get","set","_this$audioController2","_this$audioController3","_this3","setTimeout","endTitle","endScore","toString","endTime","toFixed"],"mappings":"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","file":"all.js","sourcesContent":["import { inheritsLoose as _inheritsLoose } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _class;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"28bd63vuN5NYKF2hAjWK9Mi\", \"NewComponent\", undefined);\n\nimport { _decorator, Component } from 'cc';\nvar ccclass = _decorator.ccclass,\n    property = _decorator.property;\n/**\r\n * Predefined variables\r\n * Name = NewComponent\r\n * DateTime = Tue Aug 31 2021 17:59:00 GMT+0800 (中国标准时间)\r\n * Author = Elanpro\r\n * FileBasename = NewComponent.ts\r\n * FileBasenameNoExtension = NewComponent\r\n * URL = db://assets/NewComponent.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\n\nexport var NewComponent = (_dec = ccclass('NewComponent'), _dec(_class = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(NewComponent, _Component);\n\n  function NewComponent() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = NewComponent.prototype;\n\n  // [1]\n  // dummy = '';\n  // [2]\n  // @property\n  // serializableDummy = 0;\n  _proto.start = function start() {// [3]\n  } // update (deltaTime: number) {\n  //     // [4]\n  // }\n  ;\n\n  return NewComponent;\n}(Component)) || _class);\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\n\n_cclegacy._RF.pop();","import { initializerDefineProperty as _initializerDefineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inheritsLoose as _inheritsLoose } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { applyDecoratedDescriptor as _applyDecoratedDescriptor } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerWarningHelper as _initializerWarningHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _dec2, _dec3, _class, _class2, _descriptor, _descriptor2, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"49479d/7wBLz69V7WU6q2pf\", \"AudioController\", undefined);\n\nimport { _decorator, Component, AudioSource, AudioClip } from \"cc\";\nvar ccclass = _decorator.ccclass,\n    property = _decorator.property;\nexport var AudioController = (_dec = ccclass(\"AudioController\"), _dec2 = property(AudioSource), _dec3 = property(AudioClip), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(AudioController, _Component);\n\n  function AudioController() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _initializerDefineProperty(_this, \"audio\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"sound\", _descriptor2, _assertThisInitialized(_this));\n\n    return _this;\n  }\n\n  var _proto = AudioController.prototype;\n\n  _proto.play = function play() {\n    this.audio.play();\n  };\n\n  _proto.pause = function pause() {\n    this.audio.pause();\n  };\n\n  _proto.playOneShot = function playOneShot() {\n    this.audio.playOneShot(this.sound, 1);\n  };\n\n  return AudioController;\n}(Component), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"audio\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"sound\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n})), _class2)) || _class);\n\n_cclegacy._RF.pop();","import { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"55d527cfupI+5Iw1qenROtL\", \"migrate-canvas\", undefined);\n\n/**\r\n * UI 的渲染在 v3.0 变为使用 node.layer 来判断可见性，为了保证老版本项目升级后表现一致，\r\n * Creator 会在运行时动态分配一个未使用的 layer 给常驻节点的 UI，避免常驻节点的 UI 与场景中\r\n * 的其他 UI 的 layer 发生冲突，当你确定不会发生冲突时，你可以移除此脚本.\r\n * \r\n * UI rendering has changed in v3.0 to use node.layer to determine visibility. \r\n * To ensure consistent performance after upgrading old projects. \r\n * Creator will dynamically assign an unused layer to the UI node in the persist node at \r\n * runtime to avoid conflicts between the layer of UI in the persist node and the \r\n * layer of other UI in the scene. You can remove this script when you \r\n * are sure there is no conflict\r\n */\nimport { Node, director, Director, game, Canvas, Camera } from 'cc';\nimport { EDITOR } from 'cc/env';\nvar customLayerMask = 0x000fffff;\nvar builtinLayerMask = 0xfff00000;\ndirector.on(Director.EVENT_AFTER_SCENE_LAUNCH, function () {\n  var _director$getScene, _director$getScene2, _director$getScene3;\n\n  var roots = (_director$getScene = director.getScene()) === null || _director$getScene === void 0 ? void 0 : _director$getScene.children;\n  var allCanvases = (_director$getScene2 = director.getScene()) === null || _director$getScene2 === void 0 ? void 0 : _director$getScene2.getComponentsInChildren(Canvas);\n  if (allCanvases.length <= 1) return;\n  allCanvases = allCanvases.filter(function (x) {\n    return !!x.cameraComponent;\n  });\n  var allCameras = (_director$getScene3 = director.getScene()) === null || _director$getScene3 === void 0 ? void 0 : _director$getScene3.getComponentsInChildren(Camera);\n  var usedLayer = 0;\n  allCameras.forEach(function (x) {\n    return usedLayer |= x.visibility & customLayerMask;\n  });\n  var persistCanvas = [];\n\n  for (var i = 0, l = roots.length; i < l; i++) {\n    var root = roots[i];\n    if (!game.isPersistRootNode(root)) continue;\n    var canvases = root.getComponentsInChildren(Canvas);\n    if (canvases.length === 0) continue;\n    persistCanvas.push.apply(persistCanvas, canvases.filter(function (x) {\n      return !!x.cameraComponent;\n    }));\n  }\n\n  persistCanvas.forEach(function (val) {\n    var isLayerCollided = allCanvases.find(function (x) {\n      return x !== val && x.cameraComponent.visibility & val.cameraComponent.visibility & customLayerMask;\n    });\n\n    if (isLayerCollided) {\n      var availableLayers = ~usedLayer;\n      var lastAvailableLayer = availableLayers & ~(availableLayers - 1);\n      val.cameraComponent.visibility = lastAvailableLayer | val.cameraComponent.visibility & builtinLayerMask;\n      setChildrenLayer(val.node, lastAvailableLayer);\n      usedLayer |= availableLayers;\n    }\n  });\n});\n\nfunction setChildrenLayer(node, layer) {\n  for (var i = 0, l = node.children.length; i < l; i++) {\n    node.children[i].layer = layer;\n    setChildrenLayer(node.children[i], layer);\n  }\n}\n\nvar setParentEngine = Node.prototype.setParent;\n\nif (!EDITOR) {\n  Node.prototype.setParent = function (value, keepWorldTransform) {\n    setParentEngine.call(this, value, keepWorldTransform);\n    if (!value) return; // find canvas\n\n    var layer = getCanvasCameraLayer(this);\n\n    if (layer) {\n      this.layer = layer;\n      setChildrenLayer(this, layer);\n    }\n  };\n}\n\nfunction getCanvasCameraLayer(node) {\n  var layer = 0;\n  var canvas = node.getComponent(Canvas);\n\n  if (canvas && canvas.cameraComponent) {\n    if (canvas.cameraComponent.visibility & canvas.node.layer) {\n      layer = canvas.node.layer;\n    } else {\n      layer = canvas.cameraComponent.visibility & ~(canvas.cameraComponent.visibility - 1);\n    }\n\n    return layer;\n  }\n\n  if (node.parent) {\n    layer = getCanvasCameraLayer(node.parent);\n  }\n\n  return layer;\n}\n\n_cclegacy._RF.pop();","import { initializerDefineProperty as _initializerDefineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inheritsLoose as _inheritsLoose } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { applyDecoratedDescriptor as _applyDecoratedDescriptor } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerWarningHelper as _initializerWarningHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _dec2, _dec3, _class, _class2, _descriptor, _descriptor2, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"a9447Do3TpKt6QJ4iMnyzXg\", \"PlayerController\", undefined);\n\nimport { _decorator, Component, Vec3, SkeletalAnimation, Node } from 'cc';\nvar ccclass = _decorator.ccclass,\n    property = _decorator.property;\nexport var PlayerController = (_dec = ccclass(\"PlayerController\"), _dec2 = property({\n  type: SkeletalAnimation\n}), _dec3 = property({\n  type: Node\n}), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(PlayerController, _Component);\n\n  function PlayerController() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _initializerDefineProperty(_this, \"CocosAnim\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"Handle\", _descriptor2, _assertThisInitialized(_this));\n\n    _this._startJump = false;\n    _this._jumpStep = 0;\n    _this._curJumpTime = 0;\n    _this._jumpTime = 0.5;\n    _this._curJumpSpeed = 0;\n    _this._curPos = new Vec3();\n    _this._deltaPos = new Vec3(0, 0, 0);\n    _this._targetPos = new Vec3();\n    _this.curMoveIndex = 0;\n    return _this;\n  }\n\n  var _proto = PlayerController.prototype;\n\n  _proto.start = function start() {} // onMouseUp(event: EventMouse) {\n  //     if (event.getButton() === 0) {\n  //         this.jumpByStep(1);\n  //     }\n  //     else if (event.getButton() === 2) {\n  //         this.jumpByStep(2);\n  //     }\n  // }\n  ;\n\n  _proto.setInputActive = function setInputActive(active) {\n    if (this.Handle) {\n      this.Handle.active = active;\n    } // if (active) {\n    //     systemEvent.on(SystemEvent.EventType.MOUSE_UP, this.onMouseUp, this);\n    // } else {\n    //     systemEvent.off(SystemEvent.EventType.MOUSE_UP, this.onMouseUp, this);\n    // }\n\n  };\n\n  _proto.onOneStepClick = function onOneStepClick() {\n    this.jumpByStep(1);\n  };\n\n  _proto.onTwoStepClick = function onTwoStepClick() {\n    this.jumpByStep(2);\n  };\n\n  _proto.jumpByStep = function jumpByStep(step) {\n    if (this._startJump) {\n      return;\n    }\n\n    this._startJump = true;\n    this.node.emit('JumpStart');\n    this._jumpStep = step;\n    this._curJumpTime = 0;\n    this._curJumpSpeed = this._jumpStep / this._jumpTime;\n    this.node.getPosition(this._curPos);\n    Vec3.add(this._targetPos, this._curPos, new Vec3(this._jumpStep, 0, 0));\n    this.curMoveIndex += step;\n\n    if (this.CocosAnim) {\n      this.CocosAnim.getState('cocos_anim_jump').speed = 1.5; // 跳跃动画时间比较长，这里加速播放\n\n      this.CocosAnim.play('cocos_anim_jump'); // 播放跳跃动画\n    }\n  };\n\n  _proto.reset = function reset() {\n    this.curMoveIndex = 0;\n  };\n\n  _proto.onOnceJumpEnd = function onOnceJumpEnd() {\n    if (this.CocosAnim) {\n      this.CocosAnim.play('cocos_anim_idle');\n    }\n\n    this.node.emit('JumpEnd', this.curMoveIndex);\n  };\n\n  _proto.update = function update(deltaTime) {\n    if (this._startJump) {\n      this._curJumpTime += deltaTime;\n\n      if (this._curJumpTime > this._jumpTime) {\n        // end\n        this.node.setPosition(this._targetPos);\n        this._startJump = false;\n        this.onOnceJumpEnd();\n      } else {\n        // tween\n        this.node.getPosition(this._curPos);\n        this._deltaPos.x = this._curJumpSpeed * deltaTime;\n        Vec3.add(this._curPos, this._curPos, this._deltaPos);\n        this.node.setPosition(this._curPos);\n      }\n    }\n  };\n\n  return PlayerController;\n}(Component), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"CocosAnim\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"Handle\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n})), _class2)) || _class);\n\n_cclegacy._RF.pop();","import { initializerDefineProperty as _initializerDefineProperty } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { createClass as _createClass } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { assertThisInitialized as _assertThisInitialized } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { inheritsLoose as _inheritsLoose } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { applyDecoratedDescriptor as _applyDecoratedDescriptor } from \"\\0rollupPluginModLoBabelHelpers.js\";\nimport { initializerWarningHelper as _initializerWarningHelper } from \"\\0rollupPluginModLoBabelHelpers.js\";\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _dec10, _dec11, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _descriptor9, _descriptor10, _descriptor11, _descriptor12, _temp;\n\nimport { cclegacy as _cclegacy } from \"cc\";\n\n_cclegacy._RF.push({}, \"dd75fGZMRBD6YPFBbdorldb\", \"GameManager\", undefined);\n\nimport { _decorator, Component, Prefab, instantiate, Node, CCInteger, Vec3, Label } from 'cc';\nimport { AudioController } from './AudioController';\nimport { PlayerController } from './PlayerController';\nvar ccclass = _decorator.ccclass,\n    property = _decorator.property; // 赛道格子类型，坑（BT_NONE）或者实路（BT_STONE）\n\nvar BlockType;\n\n(function (BlockType) {\n  BlockType[BlockType[\"BT_NONE\"] = 0] = \"BT_NONE\";\n  BlockType[BlockType[\"BT_STONE\"] = 1] = \"BT_STONE\";\n})(BlockType || (BlockType = {}));\n\n;\nvar GameState;\n\n(function (GameState) {\n  GameState[GameState[\"GS_INIT\"] = 0] = \"GS_INIT\";\n  GameState[GameState[\"GS_PLAYING\"] = 1] = \"GS_PLAYING\";\n  GameState[GameState[\"GS_END\"] = 2] = \"GS_END\";\n})(GameState || (GameState = {}));\n\n;\nexport var GameManager = (_dec = ccclass(\"GameManager\"), _dec2 = property({\n  type: Label\n}), _dec3 = property({\n  type: Prefab\n}), _dec4 = property({\n  type: PlayerController\n}), _dec5 = property({\n  type: Node\n}), _dec6 = property({\n  type: Node\n}), _dec7 = property({\n  type: Label\n}), _dec8 = property({\n  type: Label\n}), _dec9 = property({\n  type: Label\n}), _dec10 = property({\n  type: CCInteger\n}), _dec11 = property({\n  type: AudioController\n}), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(GameManager, _Component);\n\n  function GameManager() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _initializerDefineProperty(_this, \"stepsLabel\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"cubePrfb\", _descriptor2, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"initRoadLength\", _descriptor3, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"roadMaxLength\", _descriptor4, _assertThisInitialized(_this));\n\n    _this._road = [];\n\n    _initializerDefineProperty(_this, \"playerCtrl\", _descriptor5, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"startMenu\", _descriptor6, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"endMenu\", _descriptor7, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"endTitle\", _descriptor8, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"endScore\", _descriptor9, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"endTime\", _descriptor10, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"_maxStayDuration\", _descriptor11, _assertThisInitialized(_this));\n\n    _this._curStayDuration = 0;\n    _this._curState = GameState.GS_INIT;\n    _this._refreshStep = 10;\n    _this._canGenRoad = true;\n    _this._refreshNum = 0;\n    _this._startStamp = 0;\n\n    _initializerDefineProperty(_this, \"audioController\", _descriptor12, _assertThisInitialized(_this));\n\n    return _this;\n  }\n\n  var _proto = GameManager.prototype;\n\n  _proto.start = function start() {\n    var _this$playerCtrl, _this$playerCtrl2;\n\n    this.curState = GameState.GS_INIT;\n    (_this$playerCtrl = this.playerCtrl) === null || _this$playerCtrl === void 0 ? void 0 : _this$playerCtrl.node.on('JumpEnd', this.onPlayerJumpEnd, this);\n    (_this$playerCtrl2 = this.playerCtrl) === null || _this$playerCtrl2 === void 0 ? void 0 : _this$playerCtrl2.node.on('JumpStart', this.onPlayerJumpStart, this);\n  };\n\n  _proto.onPlayerJumpStart = function onPlayerJumpStart() {\n    var _this$audioController;\n\n    this._curStayDuration = 0;\n    this._canGenRoad = true;\n    (_this$audioController = this.audioController) === null || _this$audioController === void 0 ? void 0 : _this$audioController.playOneShot();\n  };\n\n  _proto.onPlayerJumpEnd = function onPlayerJumpEnd() {\n    if (this.stepsLabel) {\n      var _this$playerCtrl3;\n\n      var moveIndex = ((_this$playerCtrl3 = this.playerCtrl) === null || _this$playerCtrl3 === void 0 ? void 0 : _this$playerCtrl3.curMoveIndex) || 0; // 因为在最后一步可能出现步伐大的跳跃，但是此时无论跳跃是步伐大还是步伐小都不应该多增加分数\n\n      this.stepsLabel.string = '' + (moveIndex >= this.roadMaxLength ? this.roadMaxLength : moveIndex);\n    }\n\n    this.checkResult();\n  };\n\n  _proto.backStartMenu = function backStartMenu() {\n    this.curState = GameState.GS_INIT;\n  };\n\n  _proto.init = function init() {\n    this._curStayDuration = 0;\n    this._refreshNum = 0; // 激活主界面\n\n    if (this.startMenu) {\n      this.startMenu.active = true;\n    }\n\n    this.endMenu.active = false;\n    this.initRoad();\n\n    if (this.playerCtrl) {\n      // 禁止接收用户操作人物移动指令\n      this.playerCtrl.setInputActive(false); // 重置人物位置\n\n      this.playerCtrl.node.setPosition(Vec3.ZERO);\n      this.playerCtrl.reset();\n    }\n  };\n\n  _proto.checkResult = function checkResult() {\n    var _this$playerCtrl4;\n\n    var moveIndex = ((_this$playerCtrl4 = this.playerCtrl) === null || _this$playerCtrl4 === void 0 ? void 0 : _this$playerCtrl4.curMoveIndex) || 0;\n\n    if (moveIndex < this.roadMaxLength) {\n      // 跳到了坑上\n      if (this._road[moveIndex] == BlockType.BT_NONE) {\n        this.curState = GameState.GS_END;\n      }\n    } else {\n      // 跳过了最大长度\n      this.curState = GameState.GS_END;\n    }\n  };\n\n  _proto.generateBlocks = function generateBlocks(startIndex, endIndex) {\n    // 确定好每一格赛道类型\n    for (var i = startIndex; i < endIndex; i++) {\n      // 确保游戏运行时，人物一定站在实路上\n      // 如果上一格赛道是坑，那么这一格一定不能为坑\n      if (i === 0 || this._road[i - 1] === BlockType.BT_NONE) {\n        this._road.push(BlockType.BT_STONE);\n      } else {\n        this._road.push(Math.floor(Math.random() * 2));\n      }\n    } // 根据赛道类型生成赛道\n\n\n    for (var j = startIndex; j < endIndex; j++) {\n      var block = this.spawnBlockByType(this._road[j]); // 判断是否生成了道路，因为 spawnBlockByType 有可能返回坑（值为 null）\n\n      if (block) {\n        this.node.addChild(block);\n        block.setPosition(j, -1.5, 0);\n      }\n    }\n  };\n\n  _proto.initRoad = function initRoad() {\n    this.node.removeAllChildren();\n    this._road = [];\n    this.generateBlocks(0, this.initRoadLength);\n  };\n\n  _proto.generateRoad = function generateRoad() {\n    var _this2 = this;\n\n    this._refreshNum += 1;\n    this._canGenRoad = false;\n\n    var deleteBlockNum = this._road.slice(0, this.initRoadLength - this._refreshStep - 10 + this.initRoadLength * --this._refreshNum).filter(function (r) {\n      return r === BlockType.BT_STONE;\n    }).length;\n\n    this.node.children.slice(0, deleteBlockNum).forEach(function (block) {\n      _this2.node.removeChild(block);\n    });\n    this.generateBlocks(this._road.length, this._road.length + this.initRoadLength);\n  };\n\n  _proto.onStartButtonClicked = function onStartButtonClicked() {\n    this.curState = GameState.GS_PLAYING;\n    this._startStamp = new Date().getTime();\n  };\n\n  _proto.spawnBlockByType = function spawnBlockByType(type) {\n    if (!this.cubePrfb) {\n      return null;\n    }\n\n    var block = null; // 赛道类型为实路才生成\n\n    switch (type) {\n      case BlockType.BT_STONE:\n        block = instantiate(this.cubePrfb);\n        break;\n    }\n\n    return block;\n  };\n\n  _proto.update = function update(deltaTime) {\n    if (this.curState === GameState.GS_PLAYING) {\n      this._curStayDuration += deltaTime;\n\n      if (this._curStayDuration > this._maxStayDuration) {\n        // 停留时长超过最大时长，游戏结束\n        this.curState = GameState.GS_END;\n      }\n\n      if (this._canGenRoad) {\n        var _ref = this.playerCtrl || {},\n            _ref$curMoveIndex = _ref.curMoveIndex,\n            curMoveIndex = _ref$curMoveIndex === void 0 ? 0 : _ref$curMoveIndex;\n\n        if (this._road.length - curMoveIndex < this._refreshStep) {\n          this.generateRoad();\n        }\n      }\n    }\n  };\n\n  _createClass(GameManager, [{\n    key: \"curState\",\n    get: function get() {\n      return this._curState;\n    },\n    set: function set(value) {\n      var _this$audioController2,\n          _this3 = this,\n          _this$audioController3;\n\n      this._curState = value;\n\n      switch (value) {\n        case GameState.GS_INIT:\n          this.init();\n          break;\n\n        case GameState.GS_PLAYING:\n          (_this$audioController2 = this.audioController) === null || _this$audioController2 === void 0 ? void 0 : _this$audioController2.play();\n\n          if (this.startMenu) {\n            this.startMenu.active = false;\n          }\n\n          if (this.stepsLabel) {\n            this.stepsLabel.string = '0'; // 将步数重置为0\n          } // 设置 active 为 true 时会直接开始监听鼠标事件，此时鼠标抬起事件还未派发\n          // 会出现的现象就是，游戏开始的瞬间人物已经开始移动\n          // 因此，这里需要做延迟处理\n\n\n          setTimeout(function () {\n            if (_this3.playerCtrl) {\n              _this3.playerCtrl.setInputActive(true);\n            }\n          }, 0.1);\n          break;\n\n        case GameState.GS_END:\n          (_this$audioController3 = this.audioController) === null || _this$audioController3 === void 0 ? void 0 : _this$audioController3.pause();\n          this.endMenu.active = true;\n\n          if (this.playerCtrl.curMoveIndex > 200) {\n            this.endTitle.string = '不错呦！';\n          } else if (this.playerCtrl.curMoveIndex == 500) {\n            this.endTitle.string = '恭喜过关！';\n          } else {\n            this.endTitle.string = '再接再厉！';\n          }\n\n          this.endScore.string = '得分：' + this.playerCtrl.curMoveIndex.toString();\n          this.endTime.string = \"\\u603B\\u8017\\u65F6\\uFF1A\" + ((new Date().getTime() - this._startStamp) / 1000).toFixed(1) + \"s\";\n          break;\n      }\n    }\n  }]);\n\n  return GameManager;\n}(Component), _temp), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"stepsLabel\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"cubePrfb\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"initRoadLength\", [property], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 30;\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, \"roadMaxLength\", [property], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 500;\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, \"playerCtrl\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor6 = _applyDecoratedDescriptor(_class2.prototype, \"startMenu\", [_dec5], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor7 = _applyDecoratedDescriptor(_class2.prototype, \"endMenu\", [_dec6], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor8 = _applyDecoratedDescriptor(_class2.prototype, \"endTitle\", [_dec7], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor9 = _applyDecoratedDescriptor(_class2.prototype, \"endScore\", [_dec8], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor10 = _applyDecoratedDescriptor(_class2.prototype, \"endTime\", [_dec9], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor11 = _applyDecoratedDescriptor(_class2.prototype, \"_maxStayDuration\", [_dec10], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 2;\n  }\n}), _descriptor12 = _applyDecoratedDescriptor(_class2.prototype, \"audioController\", [_dec11], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n})), _class2)) || _class);\n\n_cclegacy._RF.pop();"]}